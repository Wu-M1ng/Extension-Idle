<div id="idle_container" class="extension-container">
    <details>
        <summary><b>闲置状态设定</b></summary>

        <!-- 全局设定 -->
        <fieldset>
            <legend>全局设定</legend>
            <label>
                <input type="checkbox" id="idle_enabled">
                启用闲置功能
            </label>

            <div>
                <label>
                    <input type="checkbox" id="idle_use_continuation">
                    使用续写
                </label>
                <label>
                    <input type="checkbox" id="idle_use_regenerate">
                    使用重新生成
                </label>
                <label>
                    <input type="checkbox" id="idle_use_impersonation">
                    使用模仿
                </label>
                <label>
                    <input type="checkbox" id="idle_use_swipe">
                    使用滑动
                </label>
            </div>

            <div>
                <label for="idle_sendAs">发送身份：</label>
                <select id="idle_sendAs">
                    <option value="user">用户</option>
                    <option value="char">角色</option>
                    <option value="sys">系统</option>
                    <option value="raw">原始文本</option>
                </select>
            </div>

            <div>
                <label>
                    <input type="checkbox" id="idle_random_time">
                    使用随机时间
                </label>
            </div>

            <!-- 移动上来的全局设定 -->
            <div>
                <label>
                    <input type="checkbox" id="idle_include_prompt">
                    在消息中包含提示
                </label>
            </div>

            <!-- 新增显示下一次回复时间 -->
            <div class="idle-next-time">
                下一次回复已排程：<span id="idle_next_time">--</span>
            </div>
        </fieldset>

        <!-- 局部功能 -->
        <fieldset>
            <legend>闲置行为</legend>

            <!-- ✅ 新增局部开关 -->
            <div>
                <label>
                    <input type="checkbox" id="idle_use_timer">
                    启用闲置回复
                </label>
            </div>

            <div>
                <label for="idle_timer">闲置计时器 (秒)：</label>
                <input type="number" id="idle_timer" min="1">
            </div>

            <div>
                <label for="idle_timer_min">闲置计时器最小值 (随机模式)：</label>
                <input type="number" id="idle_timer_min" min="1">
            </div>

            <div>
                <label for="idle_repeats">重复次数 (0 = 无限)：</label>
                <input type="number" id="idle_repeats" min="0">
            </div>

            <div>
                <label for="idle_prompts">提示列表 (每行一条)：</label>
                <textarea id="idle_prompts" rows="5"></textarea>
            </div>

            <!-- 一次性定时 -->
            <fieldset>
                <legend>一次性定时任务</legend>
                <div id="idle_schedule_once_list"></div>
                <button type="button" id="idle_add_schedule_once">+ 添加一次性任务</button>
            </fieldset>

            <!-- 每日定时 -->
            <fieldset>
                <legend>每日定时任务</legend>
                <div id="idle_schedule_daily_list"></div>
                <button type="button" id="idle_add_schedule_daily">+ 添加每日任务</button>
            </fieldset>
        </fieldset>

    </details>
</div>
